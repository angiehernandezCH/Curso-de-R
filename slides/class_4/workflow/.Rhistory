### Comentarios
Comentarios
################################################### Prea34w532r2%$·$%·"!"$!"$mbulo ###################################################
fsdfsdf
sdfdsf
sdfsdf
sdfsdf
sdfsdf
45teter
wefsefew
wefrwer
cat("\014")
z 0320
z = 32e234
r = rnorm(1000)
rm(list = ls())
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
library("readstata13")
library("psych")
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
install.packages("readstata13")
install.packages("psych")
install.packages("scales")
install.packages("stargazer")
install.packages("readstata13")
install.packages("psych")
install.packages("scales")
install.packages("stargazer")
install.packages("scales")
install.packages("stargazer")
getwd()
getwd()
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_data_analysis_r/repo/slides/class_4/workflow/"
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_data_analysis_r/repo/slides/class_4/workflow/"
folder
dircode     <- paste0(folder,"code/")
dircode
dirdata 	  <- paste0(folder,"data/")
dirdata
dirresults  <- paste0(folder,"results/");  dirresults
dirdata
setwd(dirdata)
dirdata 	  <- paste0(folder,"data3/")
setwd(dirdata)
dirdata 	  <- paste0(folder,"data/")
setwd(dirdata)
setwd(dirdata)
getwd()
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
View(essdata)
View(essdata)
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
source("2_exploration.R")
dircode
setwd(dircode)
essdata
dimensiones <- dim(essdata) # dimensiones, y guardo en objeto
dimensiones
head(essdata) # 6 primeras observaciones
tail(essdata)
attributes(essdata)
str(essdata)
summary(essdata)
summary(essdata$eisced)
summary(essdata$gndr)
table(essdata$eisced, essdata$hinctnta)
summary(essdata$eisced)
summary(essdata)
table(essdata$eisced, essdata$hinctnta)
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
getwd()
setwd(dircode)
vars <- c("cntry","gndr","yrbrn","eisced")
vars
essdata_sub <- essdata[,vars]
essdata[1,vars]
essdata[1:10,vars]
essdata_sub <- essdata[,vars]
essdata_sub <- essdata[,vars]
dim(essdata_sub)
essdata_sub <- essdata[10,vars]
dim(essdata_sub)
essdata_sub <- essdata[1:10,vars]
dim(essdata_sub)
essdata_sub
vars <- c("cntry","gndr","yrbrn","eisced")
essdata_sub <- essdata[,vars]
dim(essdata_sub)
head(essdata_sub)
attach(essdata_sub)
essdata_sub <- essdata_sub[cntry!="AT" & yrbrn>1990, ]
dim(essdata_sub)
essdata_sub
essdata_sub <- essdata_sub[(cntry=="AT" | cntry=="BE") & yrbrn>1990, ]
essdata_sub <- essdata_sub[(cntry=="AT" | cntry=="BE") & yrbrn>1990, ]
dim(essdata_sub)
essdata_sub
detach(essdata_sub)
attach(essdata_sub) # attach version re-escrita de los datos para evitar problemas
age <- 2019 - yrbrn
essdata_sub$age <- 2019 - yrbrn
detach(essdata_sub)
mean(age, na.rm=T)
# Seleccionar set de datos de interés
vars <- c("cntry","gndr","yrbrn","eisced")
essdata_sub <- essdata[,vars]
dim(essdata_sub)
head(essdata_sub)
# filtra filas que cumplen condición lógica
attach(essdata_sub)
essdata_sub <- essdata_sub[(cntry=="AT" | cntry=="BE") & yrbrn>1990, ]
dim(essdata_sub)
detach(essdata_sub)
attach(essdata_sub) # attach version re-escrita de los datos para evitar problemas
# crea nueva variable
age <- 2019 - yrbrn
essdata_sub$age <- 2019 - yrbrn
detach(essdata_sub)
attach(essdata_sub)  # attach version re-escrita de los datos para evitar problemas
mean(age, na.rm=T)
ifelse(yrbrn > 2000, "Millenial", "Viejo") # ejemplo simple: >2000 = millenial, else: viejo
essdata_sub$gndr_string <- ifelse(gndr == 1, "Male", ifelse(gndr == 2, "Female", NA)) # recodifica y adjunta a base de datos
generacion <- ifelse(yrbrn > 2000, "Millenial", "Viejo") # ejemplo simple: >2000 = millenial, else: viejo
essdata_sub$generacion <- ifelse(yrbrn > 2000, "Millenial", "Viejo") # ejemplo simple: >2000 = millenial, else: viejo
View(essdata_sub)
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
essdata_sub
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
essdata_sub
mean(essdata_sub$age, na.rm = T)
sd(essdata_sub$age, na.rm = T)
table(essdata_sub$gndr_string)
sapply(essdata_sub[,c("eisced", "age")], mean, na.rm=TRUE)
sapply(essdata_sub[,c("eisced", "age")], sd, na.rm=TRUE)
summary_table <- describeBy(essdata_sub[,c("eisced", "age")], essdata_sub$cntry)
summary_table
dirresults
filename <- paste0(dirresults,"miprimerplot.jpeg")
filename
jpeg(file=filename, width=600, height=350)
par(mfrow=c(1,2))
# plot izquierda
unique(essdata$eisced)
essdata$eisced <- ifelse(essdata$eisced==55, NA, essdata$eisced)
#plot(essdata$eisced, essdata$hinctnta)
#plot(jitter(essdata$eisced,2), jitter(essdata$hinctnta,2), pch=16, col="blue",
#     xlab="Education", ylab="Income")
plot(jitter(essdata$eisced,1), jitter(essdata$hinctnta,2),
col = rgb(red = 0, green = 0, blue = 1, alpha = 0.05),
pch = 16,xlab="Education", ylab="Income")
countries <- unique(essdata$cntry)
for (c in countries) {
data_country <- essdata[essdata$cntry==c,]
abline(lm(hinctnta ~ eisced, data=data_country), col="red")
}
# plot derecha
hist(essdata$eisced, col="green")
dev.off()
model1 <- lm(eisced ~ age + factor(gndr_string), data=essdata_sub); model1
model2 <- update(model1, . ~ . + factor(gndr_string)*age); model2
summary(model2)
sum_model2 <- summary(model2); sum_model2
names(sum_model2)
sum_model2$call
sum_model2$coefficients
sum_model2$df
filename <- paste0(dirresults,"miprimeratabladeregresion.txt")
filename
model1
model2
filename
stargazer(model1, model2, type="text",
covariate.labels=c("Age","Gender (Male=1)", "Gender*Age","Intercep"),
dep.var.labels=c("Education","Education"),
out=filename)
stargazer(model1, model2, type="text",
covariate.labels=c("Age","Gender (Male=1)", "Gender*Age","Intercep"),
dep.var.labels=c("Education","Education"),
out=filename)
source("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/code/4_analyses.R")
source("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/code/4_analyses.R")
source("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/code/4_analyses.R")
################################################### Preambulo ###################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("readstata13")
library("psych")
library("scales")
library("stargazer")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2022_2_data_analysis_r/repo/slides/class_4/workflow/"
dircode     <- paste0(folder,"code/")
dirdata 	  <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
setwd(dirdata)
getwd()
essdata <- read.dta13("ESS8_subset.dta", convert.factors=FALSE); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
# Set working directory
setwd(dircode)
source("4_analyses.R")
